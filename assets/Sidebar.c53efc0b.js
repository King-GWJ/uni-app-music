import{H as e,U as s,o as a,c as t,w as r,b as i,k as l,n as o,d as n,M as c,f as d,g as u,P as h,m as w,l as m,Q as p,r as f,a as v,N as _,e as k,t as y,O as g,v as b,V as D,W as S,z as T,j as C,X as x}from"./index-d83f280a.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";const E=s=>{s&&e({url:s})};const M=A({name:"UniDrawer",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(s=>{if(this.disable)return;const a=Object.keys(e).find((a=>{const t=s.key,r=e[a];return r===t||Array.isArray(r)&&r.includes(t)}));a&&setTimeout((()=>{this.$emit(a,{})}),0)}))},render:()=>{}}},emits:["change"],props:{mode:{type:String,default:""},mask:{type:Boolean,default:!0},maskClick:{type:Boolean,default:!0},width:{type:Number,default:220}},data:()=>({visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null,drawerWidth:220}),created(){this.drawerWidth=this.width,this.rightMode="right"===this.mode},methods:{clear(){},close(e){("mask"!==e||this.maskClick)&&this.visibleSync&&this._change("showDrawer","visibleSync",!1)},open(){this.visibleSync||this._change("visibleSync","showDrawer",!0)},_change(e,s,a){this[e]=a,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout((()=>{this[s]=a,this.$emit("change",a)}),a?50:300)}}},[["render",function(e,h,w,m,p,f){const v=u,_=s("keypress");return p.visibleSync?(a(),t(v,{key:0,class:l([{"uni-drawer--visible":p.showDrawer},"uni-drawer"]),onTouchmove:c(f.clear,["stop","prevent"])},{default:r((()=>[i(v,{class:l(["uni-drawer__mask",{"uni-drawer__mask--visible":p.showDrawer&&w.mask}]),onClick:h[0]||(h[0]=e=>f.close("mask"))},null,8,["class"]),i(v,{class:l(["uni-drawer__content",{"uni-drawer--right":p.rightMode,"uni-drawer--left":!p.rightMode,"uni-drawer__content--visible":p.showDrawer}]),style:o({width:p.drawerWidth+"px"})},{default:r((()=>[n(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),i(_,{onEsc:h[1]||(h[1]=e=>f.close("mask"))})])),_:3},8,["class","onTouchmove"])):d("",!0)}],["__scopeId","data-v-ab3d3e25"]]),U=A({__name:"Sidebar",setup(e,{expose:s}){const l=h(),o=w(l.profile),n=w(null),c=w(!1),d=m("curCookie");p((()=>{c.value=!!d,o.value||(o.value=l.setProfileData())}));const A=()=>{n.value.close()};s({showDrawer:()=>{n.value.open()},closeDrawer:A});const U=()=>{D().then((e=>{200===e.code&&(S("curCookie",""),S("profile",""),c.value=!1,A())}))};return(e,s)=>{const l=T,d=u,h=C,w=x,m=f(v("uni-drawer"),M);return a(),t(m,{ref_key:"showLeft",ref:n,mode:"left",width:300},{default:r((()=>[i(d,{class:"close"},{default:r((()=>[_(i(d,{class:"user"},{default:r((()=>{var e;return[i(l,{src:null==(e=o.value)?void 0:e.avatarUrl,mode:"widthFix",class:"user-img"},null,8,["src"]),i(d,{class:"user-name"},{default:r((()=>{var e;return[k(y(null==(e=o.value)?void 0:e.nickname),1)]})),_:1})]})),_:1},512),[[g,c.value]]),_(i(w,{onClick:s[0]||(s[0]=()=>{b(E)("/pages/login/login"),A()})},{default:r((()=>[i(h,{class:"word-btn-white"},{default:r((()=>[k("登录")])),_:1})])),_:1},512),[[g,!c.value]]),_(i(w,{onClick:U},{default:r((()=>[i(h,{class:"word-btn-white"},{default:r((()=>[k("退出登录")])),_:1})])),_:1},512),[[g,c.value]])])),_:1})])),_:1},512)}}},[["__scopeId","data-v-e02306cf"]]);export{U as S,E as n};
