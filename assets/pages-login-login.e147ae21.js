import{W as e}from"./uni-cloud.es.500efbb6.js";import{a9 as t,i as a,_ as l,o as i,c as s,w as r,x as o,n,D as u,b as d,f as c,e as h,t as m,z as f,g as p,j as g,r as y,a as b,F as v,k as x,y as k,af as w,ag as S,ah as A,ai as I,aj as C,d as M,ak as D,I as V,al as _,am as E,an as R,ao as F,H as L,m as B,Y as N,ap as j,aq as T,K as J}from"./index-43ced767.js";import{_ as O}from"./uni-icons.ac3eeace.js";const G={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let P;setTimeout((()=>{P=t().platform}),16);const{t:z}=a(G);const W=l({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:P,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZV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"}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||z("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||z("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||z("uni-load-more.contentnomore")}},mounted(){},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(e,t,a,l,y,b){const v=f,x=p,k=g;return i(),s(x,{class:"uni-load-more",onClick:b.onClick},{default:r((()=>[!y.webviewHide&&("circle"===a.iconType||"auto"===a.iconType&&"android"===y.platform)&&"loading"===a.status&&a.showIcon?(i(),o("svg",{key:0,width:"24",height:"24",viewBox:"25 25 50 50",style:n({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-H5"},[u("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:n({color:a.color}),"stroke-width":3},null,4)],4)):!y.webviewHide&&"loading"===a.status&&a.showIcon?(i(),s(x,{key:1,style:n({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},{default:r((()=>[d(v,{src:y.imgBase64,mode:"widthFix"},null,8,["src"])])),_:1},8,["style"])):c("",!0),a.showText?(i(),s(k,{key:2,class:"uni-load-more__text",style:n({color:a.color})},{default:r((()=>[h(m("more"===a.status?b.contentdownText:"loading"===a.status?b.contentrefreshText:b.contentnomoreText),1)])),_:1},8,["style"])):c("",!0)])),_:1},8,["onClick"])}],["__scopeId","data-v-13bb0eea"]]);const Z=l({name:"uniDataChecklist",mixins:[e.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},change(e){const t=e.detail.value;let a={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(a.value.push(e[this.map.value]),a.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(a={value:e[this.map.value],data:e})}this.$emit("input",a.value),this.$emit("update:modelValue",a.value),this.$emit("change",{detail:a}),this.multiple?this.dataList=this.getDataList(a.value,!0):this.dataList=this.getDataList(a.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),a=[];return this.multiple&&(Array.isArray(e)||(e=[])),t.forEach(((t,l)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let a=e.find((e=>e===t[this.map.value]));t.selected=void 0!==a}else t.selected=!1;else t.selected=e===t[this.map.value];a.push(t)})),this.setRange(a)},setRange(e){let t=e.filter((e=>e.selected)),a=Number(this.min)||0,l=Number(this.max)||"";return e.forEach(((i,s)=>{if(this.multiple){if(t.length<=a){void 0!==t.find((e=>e[this.map.value]===i[this.map.value]))&&(i.disabled=!0)}if(t.length>=l&&""!==l){void 0===t.find((e=>e[this.map.value]===i[this.map.value]))&&(i.disabled=!0)}}this.setStyles(i,s),e[s]=i})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},a=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?a:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?a:"#f5f5f5"));let l="";for(let i in t)l+=`${i}:${t[i]};`;return l},setStyleIcon(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?a:"#fff",t["border-color"]=e.selected?a:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?a:"#DCDFE6")}for(let l in t)a+=`${l}:${t[l]};`;return a},setStyleIconText(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:a:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let l in t)a+=`${l}:${t[l]};`;return a},setStyleRightIcon(e){let t={},a="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let l in t)a+=`${l}:${t[l]};`;return a}}},[["render",function(e,t,a,l,u,f){const M=y(b("uni-load-more"),W),D=g,V=p,_=w,E=S,R=A,F=I,L=C;return i(),s(V,{class:"uni-data-checklist",style:n({"margin-top":u.isTop+"px"})},{default:r((()=>[u.isLocal?(i(),o(v,{key:1},[a.multiple?(i(),s(R,{key:0,class:x(["checklist-group",{"is-list":"list"===a.mode||a.wrap}]),onChange:f.change},{default:r((()=>[(i(!0),o(v,null,k(u.dataList,((e,t)=>(i(),s(E,{class:x(["checklist-box",["is--"+a.mode,e.selected?"is-checked":"",a.disabled||e.disabled?"is-disable":"",0!==t&&"list"===a.mode?"is-list-border":""]]),style:n(e.styleBackgroud),key:t},{default:r((()=>[d(_,{class:"hidden",hidden:"",disabled:a.disabled||!!e.disabled,value:e[a.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==a.mode&&"list"!==a.mode||"list"===a.mode&&"left"===a.icon?(i(),s(V,{key:0,class:"checkbox__inner",style:n(e.styleIcon)},{default:r((()=>[d(V,{class:"checkbox__inner-icon"})])),_:2},1032,["style"])):c("",!0),d(V,{class:x(["checklist-content",{"list-content":"list"===a.mode&&"left"===a.icon}])},{default:r((()=>[d(D,{class:"checklist-text",style:n(e.styleIconText)},{default:r((()=>[h(m(e[a.map.text]),1)])),_:2},1032,["style"]),"list"===a.mode&&"right"===a.icon?(i(),s(V,{key:0,class:"checkobx__list",style:n(e.styleBackgroud)},null,8,["style"])):c("",!0)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128))])),_:1},8,["class","onChange"])):(i(),s(L,{key:1,class:x(["checklist-group",{"is-list":"list"===a.mode,"is-wrap":a.wrap}]),onChange:f.change},{default:r((()=>[(i(!0),o(v,null,k(u.dataList,((e,t)=>(i(),s(E,{class:x(["checklist-box",["is--"+a.mode,e.selected?"is-checked":"",a.disabled||e.disabled?"is-disable":"",0!==t&&"list"===a.mode?"is-list-border":""]]),style:n(e.styleBackgroud),key:t},{default:r((()=>[d(F,{class:"hidden",hidden:"",disabled:a.disabled||e.disabled,value:e[a.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==a.mode&&"list"!==a.mode||"list"===a.mode&&"left"===a.icon?(i(),s(V,{key:0,class:"radio__inner",style:n(e.styleBackgroud)},{default:r((()=>[d(V,{class:"radio__inner-icon",style:n(e.styleIcon)},null,8,["style"])])),_:2},1032,["style"])):c("",!0),d(V,{class:x(["checklist-content",{"list-content":"list"===a.mode&&"left"===a.icon}])},{default:r((()=>[d(D,{class:"checklist-text",style:n(e.styleIconText)},{default:r((()=>[h(m(e[a.map.text]),1)])),_:2},1032,["style"]),"list"===a.mode&&"right"===a.icon?(i(),s(V,{key:0,style:n(e.styleRightIcon),class:"checkobx__list"},null,8,["style"])):c("",!0)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128))])),_:1},8,["class","onChange"]))],64)):(i(),s(V,{key:0,class:"uni-data-loading"},{default:r((()=>[e.mixinDatacomErrorMessage?(i(),s(D,{key:1},{default:r((()=>[h(m(e.mixinDatacomErrorMessage),1)])),_:1})):(i(),s(M,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":u.contentText},null,8,["content-text"]))])),_:1}))])),_:1},8,["style"])}],["__scopeId","data-v-f01e06c8"]]);function U(e){let t="";for(let a in e){t+=`${a}:${e[a]};`}return t}const H=l({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let a in e)e[a]&&(t+=`${a} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return U({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return U({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(e,t,a,l,u,h){const m=y(b("uni-icons"),O),f=D,g=V,k=p;return i(),s(k,{class:x(["uni-easyinput",{"uni-easyinput-error":h.msg}]),style:n(h.boxStyle)},{default:r((()=>[d(k,{class:x(["uni-easyinput__content",h.inputContentClass]),style:n(h.inputContentStyle)},{default:r((()=>[a.prefixIcon?(i(),s(m,{key:0,class:"content-clear-icon",type:a.prefixIcon,color:"#c0c4cc",onClick:t[0]||(t[0]=e=>h.onClickIcon("prefix")),size:"22"},null,8,["type"])):c("",!0),M(e.$slots,"left",{},void 0,!0),"textarea"===a.type?(i(),s(f,{key:1,class:x(["uni-easyinput__content-textarea",{"input-padding":a.inputBorder}]),name:a.name,value:u.val,placeholder:a.placeholder,placeholderStyle:a.placeholderStyle,disabled:a.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:h.inputMaxlength,focus:u.focused,autoHeight:a.autoHeight,"cursor-spacing":a.cursorSpacing,"adjust-position":a.adjustPosition,onInput:h.onInput,onBlur:h._Blur,onFocus:h._Focus,onConfirm:h.onConfirm,onKeyboardheightchange:h.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(i(),s(g,{key:2,type:"password"===a.type?"text":a.type,class:"uni-easyinput__content-input",style:n(h.inputStyle),name:a.name,value:u.val,password:!u.showPassword&&"password"===a.type,placeholder:a.placeholder,placeholderStyle:a.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:a.disabled,maxlength:h.inputMaxlength,focus:u.focused,confirmType:a.confirmType,"cursor-spacing":a.cursorSpacing,"adjust-position":a.adjustPosition,onFocus:h._Focus,onBlur:h._Blur,onInput:h.onInput,onConfirm:h.onConfirm,onKeyboardheightchange:h.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===a.type&&a.passwordIcon?(i(),o(v,{key:3},[h.isVal?(i(),s(m,{key:0,class:x(["content-clear-icon",{"is-textarea-icon":"textarea"===a.type}]),type:u.showPassword?"eye-slash-filled":"eye-filled",size:22,color:u.focusShow?a.primaryColor:"#c0c4cc",onClick:h.onEyes},null,8,["class","type","color","onClick"])):c("",!0)],64)):c("",!0),a.suffixIcon?(i(),o(v,{key:4},[a.suffixIcon?(i(),s(m,{key:0,class:"content-clear-icon",type:a.suffixIcon,color:"#c0c4cc",onClick:t[1]||(t[1]=e=>h.onClickIcon("suffix")),size:"22"},null,8,["type"])):c("",!0)],64)):(i(),o(v,{key:5},[a.clearable&&h.isVal&&!a.disabled&&"textarea"!==a.type?(i(),s(m,{key:0,class:x(["content-clear-icon",{"is-textarea-icon":"textarea"===a.type}]),type:"clear",size:a.clearSize,color:h.msg?"#dd524d":u.focusShow?a.primaryColor:"#c0c4cc",onClick:h.onClear},null,8,["class","size","color","onClick"])):c("",!0)],64)),M(e.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-5763a810"]]);const Y=l({name:"uniFormsItem",options:{virtualHost:!0},provide(){return{uniFormItem:this}},inject:{form:{from:"uniForm",default:null}},props:{rules:{type:Array,default:()=>null},name:{type:[String,Array],default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},leftIcon:String,iconColor:{type:String,default:"#606266"}},data:()=>({errMsg:"",userRules:null,localLabelAlign:"left",localLabelWidth:"70px",localLabelPos:"left",border:!1,isFirstBorder:!1}),computed:{msg(){return this.errorMessage||this.errMsg}},watch:{"form.formRules"(e){this.init()},"form.labelWidth"(e){this.localLabelWidth=this._labelWidthUnit(e)},"form.labelPosition"(e){this.localLabelPos=this._labelPosition()},"form.labelAlign"(e){}},created(){this.init(!0),this.name&&this.form&&this.$watch((()=>this.form._getDataValue(this.name,this.form.localData)),((e,t)=>{if(!this.form._isEqual(e,t)){const t=this.itemSetValue(e);this.onFieldChange(t,!1)}}),{immediate:!1})},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{setRules(e=null){this.userRules=e,this.init(!1)},setValue(){},async onFieldChange(e,t=!0){const{formData:a,localData:l,errShowType:i,validateCheck:s,validateTrigger:r,_isRequiredField:o,_realName:n}=this.form,u=n(this.name);e||(e=this.form.formData[u]);const d=this.itemRules.rules&&this.itemRules.rules.length;if(!this.validator||!d||0===d)return;const c=o(this.itemRules.rules||[]);let h=null;return"bind"===r||t?(h=await this.validator.validateUpdate({[u]:e},a),c||void 0!==e&&""!==e||(h=null),h&&h.errorMessage?("undertext"===i&&(this.errMsg=h?h.errorMessage:""),"toast"===i&&_({title:h.errorMessage||"校验错误",icon:"none"}),"modal"===i&&E({title:"提示",content:h.errorMessage||"校验错误"})):this.errMsg="",s(h||null)):this.errMsg="",h||null},init(e=!1){const{validator:t,formRules:a,childrens:l,formData:i,localData:s,_realName:r,labelWidth:o,_getDataValue:n,_setDataValue:u}=this.form||{};if(this.localLabelAlign=this._justifyContent(),this.localLabelWidth=this._labelWidthUnit(o),this.localLabelPos=this._labelPosition(),this.form&&e&&l.push(this),!t||!a)return;this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border;const d=r(this.name),c=this.userRules||this.rules;"object"==typeof a&&c&&(a[d]={rules:c},t.updateSchema(a));const h=a[d]||{};this.itemRules=h,this.validator=t,this.itemSetValue(n(this.name,s))},unInit(){if(this.form){const{childrens:e,formData:t,_realName:a}=this.form;e.forEach(((e,l)=>{e===this&&(this.form.childrens.splice(l,1),delete t[a(e.name)])}))}},itemSetValue(e){const t=this.form._realName(this.name),a=this.itemRules.rules||[],l=this.form._getValue(t,e,a);return this.form._setDataValue(t,this.form.formData,l),l},clearValidate(){this.errMsg=""},_isRequired(){return this.required},_justifyContent(){if(this.form){const{labelAlign:e}=this.form;let t=this.labelAlign?this.labelAlign:e;if("left"===t)return"flex-start";if("center"===t)return"center";if("right"===t)return"flex-end"}return"flex-start"},_labelWidthUnit(e){return this.num2px(this.labelWidth?this.labelWidth:e||(this.label?70:"auto"))},_labelPosition(){return this.form&&this.form.labelPosition||"left"},isTrigger:(e,t,a)=>"submit"!==e&&e?"bind":void 0===e?"bind"!==t?t?"submit":""===a?"bind":"submit":"bind":"submit",num2px:e=>"number"==typeof e?`${e}px`:e}},[["render",function(e,t,a,l,o,u){const f=g,y=p;return i(),s(y,{class:x(["uni-forms-item",["is-direction-"+o.localLabelPos,o.border?"uni-forms-item--border":"",o.border&&o.isFirstBorder?"is-first-border":""]])},{default:r((()=>[M(e.$slots,"label",{},(()=>[d(y,{class:x(["uni-forms-item__label",{"no-label":!a.label&&!a.required}]),style:n({width:o.localLabelWidth,justifyContent:o.localLabelAlign})},{default:r((()=>[a.required?(i(),s(f,{key:0,class:"is-required"},{default:r((()=>[h("*")])),_:1})):c("",!0),d(f,null,{default:r((()=>[h(m(a.label),1)])),_:1})])),_:1},8,["class","style"])]),!0),d(y,{class:"uni-forms-item__content"},{default:r((()=>[M(e.$slots,"default",{},void 0,!0),d(y,{class:x(["uni-forms-item__error",{"msg--active":u.msg}])},{default:r((()=>[d(f,null,{default:r((()=>[h(m(u.msg),1)])),_:1})])),_:1},8,["class"])])),_:3})])),_:3},8,["class"])}],["__scopeId","data-v-5900f7e8"]]);var Q={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const X={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function K(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let a=t;for(let l in e){let t=new RegExp("{"+l+"}");a=a.replace(t,e[l])}return a}const q={integer:e=>q.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return q.number(e)&&!q.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!q.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(Q.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(Q.url),pattern(e,t){try{return new RegExp(e).test(t)}catch(a){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(Q.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};const $={required:(e,t,a)=>e.required&&function(e,t){return null==e||"string"==typeof e&&!e||!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length}(t,e.format||typeof t)?K(e,e.errorMessage||a.required):null,range(e,t,a){const{range:l,errorMessage:i}=e;let s=new Array(l.length);for(let o=0;o<l.length;o++){const e=l[o];q.object(e)&&void 0!==e.value?s[o]=e.value:s[o]=e}let r=!1;return Array.isArray(t)?r=new Set(t.concat(s)).size===s.length:s.indexOf(t)>-1&&(r=!0),r?null:K(e,i||a.enum)},rangeNumber(e,t,a){if(!q.number(t))return K(e,e.errorMessage||a.pattern.mismatch);let{minimum:l,maximum:i,exclusiveMinimum:s,exclusiveMaximum:r}=e,o=s?t<=l:t<l,n=r?t>=i:t>i;return void 0!==l&&o?K(e,e.errorMessage||a.number[s?"exclusiveMinimum":"minimum"]):void 0!==i&&n?K(e,e.errorMessage||a.number[r?"exclusiveMaximum":"maximum"]):void 0!==l&&void 0!==i&&(o||n)?K(e,e.errorMessage||a.number.range):null},rangeLength(e,t,a){if(!q.string(t)&&!q.array(t))return K(e,e.errorMessage||a.pattern.mismatch);let l=e.minLength,i=e.maxLength,s=t.length;return void 0!==l&&s<l?K(e,e.errorMessage||a.length.minLength):void 0!==i&&s>i?K(e,e.errorMessage||a.length.maxLength):void 0!==l&&void 0!==i&&(s<l||s>i)?K(e,e.errorMessage||a.length.range):null},pattern:(e,t,a)=>q.pattern(e.pattern,t)?null:K(e,e.errorMessage||a.pattern.mismatch),format(e,t,a){var l=Object.keys(q),i=X[e.format]?X[e.format]:e.format||e.arrayType;return l.indexOf(i)>-1&&!q[i](t)?K(e,e.errorMessage||a.typeError):null},arrayTypeFormat(e,t,a){if(!Array.isArray(t))return K(e,e.errorMessage||a.typeError);for(let l=0;l<t.length;l++){const i=t[l];let s=this.format(e,i,a);if(null!==s)return s}return null}};class ee extends class{constructor(e){this._message=e}async validateRule(e,t,a,l,i){var s=null;let r=t.rules;if(r.findIndex((e=>e.required))<0){if(null==a)return s;if("string"==typeof a&&!a.length)return s}var o=this._message;if(void 0===r)return o.default;for(var n=0;n<r.length;n++){let u=r[n],d=this._getValidateType(u);if(Object.assign(u,{label:t.label||`["${e}"]`}),$[d]&&null!=(s=$[d](u,a,o)))break;if(u.validateExpr){let e=Date.now();if(!1===u.validateExpr(a,i,e)){s=this._getMessage(u,u.errorMessage||this._message.default);break}}if(u.validateFunction&&null!==(s=await this.validateFunction(u,a,l,i,d)))break}return null!==s&&(s=o.TAG+s),s}async validateFunction(e,t,a,l,i){let s=null;try{let r=null;const o=await e.validateFunction(e,t,l||a,(e=>{r=e}));(r||"string"==typeof o&&o||!1===o)&&(s=this._getMessage(e,r||o,i))}catch(r){s=this._getMessage(e,r.message,i)}return s}_getMessage(e,t,a){return K(e,t||e.errorMessage||this._message[a]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}{constructor(e,t){super(ee.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!1,t)),a.length?a[0]:null}async validateAll(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!0,t)),a}async validateUpdate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidateUpdate(e,!1,t)),a.length?a[0]:null}async invokeValidate(e,t,a){let l=[],i=this._schema;for(let s in i){let r=i[s],o=await this.validateRule(s,r,e[s],e,a);if(null!=o&&(l.push({key:s,errorMessage:o}),!t))break}return l}async invokeValidateUpdate(e,t,a){let l=[];for(let i in e){let s=await this.validateRule(i,this._schema[i],e[i],e,a);if(null!=s&&(l.push({key:i,errorMessage:s}),!t))break}return l}_checkFieldInSchema(e){var t=Object.keys(e),a=Object.keys(this._schema);if(new Set(t.concat(a)).size===a.length)return"";var l=t.filter((e=>a.indexOf(e)<0));return[{key:"invalid",errorMessage:K({field:JSON.stringify(l)},ee.message.TAG+ee.message.defaultInvalid)}]}}ee.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};const te=(e,t,a)=>{const l=a.find((e=>{return e.format&&("int"===(t=e.format)||"double"===t||"number"===t||"timestamp"===t);var t})),i=a.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return l&&(t=t||0===t?ne(Number(t))?Number(t):t:null),i&&(t=!!ue(t)&&t),t},ae=(e,t)=>oe(t,e),le=(e,t={})=>{const a=re(e);if("object"==typeof a&&Array.isArray(a)&&a.length>1){return a.reduce(((e,t)=>e+`#${t}`),"_formdata_")}return a[0]||e},ie=e=>{let t=e.replace("_formdata_#","");return t=t.split("#").map((e=>ne(e)?Number(e):e)),t},se=(e,t,a)=>("object"!=typeof e||re(t).reduce(((e,t,l,i)=>l===i.length-1?(e[t]=a,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(i[l+1])?[]:{}),e[t])),e),e);function re(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}const oe=(e,t,a="undefined")=>{let l=re(t).reduce(((e,t)=>(e||{})[t]),e);return l&&void 0===l?a:l},ne=e=>!isNaN(Number(e)),ue=e=>"boolean"==typeof e;const de=l({name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:()=>null},modelValue:{type:Object,default:()=>null},model:{type:Object,default:()=>null},rules:{type:Object,default:()=>({})},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide(){return{uniForm:this}},data:()=>({formData:{},formRules:{}}),computed:{localData(){const e=this.model||this.modelValue||this.value;return e?(t=e,JSON.parse(JSON.stringify(t))):{};var t}},watch:{rules:{handler:function(e,t){this.setRules(e)},deep:!0,immediate:!0}},created(){R().$vm.$.appContext.config.globalProperties.binddata||(R().$vm.$.appContext.config.globalProperties.binddata=function(e,t,a){if(a)this.$refs[a].setValue(e,t);else{let a;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){a=t;break}}if(!a)return console.error("当前 uni-froms 组件缺少 ref 属性");a.setValue(e,t)}}),this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules(e){this.formRules=Object.assign({},this.formRules,e),this.validator=new ee(e)},setValue(e,t){let a=this.childrens.find((t=>t.name===e));return a?(this.formData[e]=te(0,t,this.formRules[e]&&this.formRules[e].rules||[]),a.onFieldChange(this.formData[e])):null},validate(e,t){return this.checkAll(this.formData,e,t)},validateField(e=[],t){e=[].concat(e);let a={};return this.childrens.forEach((t=>{const l=le(t.name);-1!==e.indexOf(l)&&(a=Object.assign({},a,{[l]:this.formData[l]}))})),this.checkAll(a,[],t)},clearValidate(e=[]){e=[].concat(e),this.childrens.forEach((t=>{if(0===e.length)t.errMsg="";else{const a=le(t.name);-1!==e.indexOf(a)&&(t.errMsg="")}}))},submit(e,t,a){for(let l in this.dataValue){this.childrens.find((e=>e.name===l))&&void 0===this.formData[l]&&(this.formData[l]=this._getValue(l,this.dataValue[l]))}return a||console.warn("submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,e,t,"submit")},async checkAll(e,t,a,l){if(!this.validator)return;let i,s=[];for(let u in e){const e=this.childrens.find((e=>le(e.name)===u));e&&s.push(e)}a||"function"!=typeof t||(a=t),!a&&"function"!=typeof a&&Promise&&(i=new Promise(((e,t)=>{a=function(a,l){a?t(a):e(l)}})));let r=[],o=JSON.parse(JSON.stringify(e));for(let u in s){const e=s[u];let t=le(e.name);const a=await e.onFieldChange(o[t]);if(a&&(r.push(a),"toast"===this.errShowType||"modal"===this.errShowType))break}Array.isArray(r)&&0===r.length&&(r=null),Array.isArray(t)&&t.forEach((e=>{let t=le(e),a=ae(e,this.localData);void 0!==a&&(o[t]=a)})),"submit"===l?this.$emit("submit",{detail:{value:o,errors:r}}):this.$emit("validate",r);let n={};return n=((e={},t)=>{let a=JSON.parse(JSON.stringify(e)),l={};for(let i in a){let e=ie(i);se(l,e,a[i])}return l})(o,this.name),a&&"function"==typeof a&&a(r,n),i&&a?i:null},validateCheck(e){this.$emit("validate",e)},_getValue:te,_isRequiredField:e=>{let t=!1;for(let a=0;a<e.length;a++){if(e[a].required){t=!0;break}}return t},_setDataValue:(e,t,a)=>(t[e]=a,a||""),_getDataValue:ae,_realName:le,_isRealName:e=>/^_formdata_#*/.test(e),_isEqual:(e,t)=>{if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var a=toString.call(e);if(a!==toString.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}if("[object Object]"==a){var l=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(l.length!=i.length)return!1;for(var s=0;s<l.length;s++){var r=l[s];if(e[r]!==t[r])return!1}return!0}return"[object Array]"==a?e.toString()==t.toString():void 0}}},[["render",function(e,t,a,l,o,n){const u=F,c=p;return i(),s(c,{class:"uni-forms"},{default:r((()=>[d(u,null,{default:r((()=>[M(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-69e871ef"]]),ce={__name:"EmailLogin",setup(e){const t=L(),a=B({email:"",password:""}),l=B(null),o={email:{rules:[{required:!0,errorMessage:"邮箱不能为空"},{format:"email",errorMessage:"邮箱格式错误"}]},password:{rules:[{required:!0,errorMessage:"密码不能为空"}]}},n=()=>{l.value.validate().then((e=>{t.getLogin("email",e.email,e.password)})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,t)=>{const u=y(b("uni-easyinput"),H),c=y(b("uni-forms-item"),Y),m=y(b("uni-forms"),de),f=N,g=p;return i(),s(g,{className:"EmailLogin"},{default:r((()=>[d(m,{ref_key:"form",ref:l,rules:o,modelValue:a.value},{default:r((()=>[d(c,{name:"email"},{default:r((()=>[d(u,{prefixIcon:"email",modelValue:a.value.email,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),d(c,{name:"password"},{default:r((()=>[d(u,{prefixIcon:"locked",type:"password",modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),d(f,{onClick:n},{default:r((()=>[h("登录")])),_:1})])),_:1})}}},he=l({__name:"PhoneLogin",setup(e){const t=L(),a=B(null),l=B({phone:"",password:""}),o={phone:{rules:[{required:!0,errorMessage:"手机号不能为空"},{minLength:1,maxLength:11,errorMessage:"手机号长度必须为{maxLength}位"}]},password:{rules:[{required:!0,errorMessage:"密码不能为空"}]}},n=()=>{a.value.validate().then((e=>{t.getLogin("phone",e.phone,e.password)})).catch((e=>{console.log("表单错误信息：",e)}))};return(e,t)=>{const u=y(b("uni-easyinput"),H),c=y(b("uni-forms-item"),Y),m=y(b("uni-forms"),de),f=N,g=p;return i(),s(g,{className:"PhoneLogin"},{default:r((()=>[d(m,{ref_key:"form",ref:a,rules:o,modelValue:l.value},{default:r((()=>[d(c,{name:"phone"},{default:r((()=>[d(u,{prefixIcon:"phone",type:"number",modelValue:l.value.phone,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),d(c,{name:"password"},{default:r((()=>[d(u,{prefixIcon:"locked",type:"password",modelValue:l.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),d(f,{onClick:n},{default:r((()=>[h("登录")])),_:1})])),_:1})}}},[["__scopeId","data-v-29c318b1"]]),me=l({__name:"QrCodeLogin",setup(e){const t=L(),a=B("");return j().then((e=>{200===e.code&&T(e.data.unikey).then((l=>{a.value=l.data.qrimg,t.getCheckQr(e.data.unikey)}))})),(e,t)=>{const l=f,o=p;return i(),s(o,{className:"QrCodeLogin"},{default:r((()=>[d(l,{style:{width:"200px",height:"200px","background-color":"#eeeeee"},src:a.value},null,8,["src"])])),_:1})}}},[["__scopeId","data-v-dc720816"]]),fe=l({__name:"login",setup(e){const t=L(),a=B(0),l=B([{text:"邮箱",value:0},{text:"手机号",value:1},{text:"二维码",value:2},{text:"游客登录",value:3}]);return J(a,((e,a)=>{3===e&&t.getLogin("anonimous")})),(e,t)=>{const o=y(b("uni-data-checkbox"),Z),n=p;return i(),s(n,{class:"login"},{default:r((()=>[0===a.value?(i(),s(ce,{key:0})):1===a.value?(i(),s(he,{key:1})):2===a.value?(i(),s(me,{key:2})):c("",!0),d(o,{mode:"tag",icon:"left",selectedColor:"#c5483c",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),localdata:l.value},null,8,["modelValue","localdata"])])),_:1})}}},[["__scopeId","data-v-7d1e5ec6"]]);export{fe as default};
